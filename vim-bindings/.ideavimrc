" ==============================
" IdeaVim Configuration
" ==============================

" ---------------------
" Leader Key
" ---------------------
let mapleader=' '
let maplocalleader=' '

" ---------------------
" Generic Vim Settings
" ---------------------
set scrolloff=8             " Keep 8 lines above/below cursor
set visualbell              " Use visual bell instead of beep
set ignorecase              " Case-insensitive search
set smartcase               " Unless uppercase used
set timeoutlen=400          " Timeout for mapped key sequences
set whichwrap+=<,>,h,l,[,]  " Allow cursor wrapping
set clipboard+=unnamedplus  " Use system clipboard (handled automatically in IdeaVim)
set hlsearch                " Highlight search matches
set incsearch               " Incremental search
set foldmethod=indent       " Folding based on indentation
set autoindent              " Auto-indent new lines
set tabstop=4               " Tab width
set shiftwidth=4            " Indent width
set expandtab               " Use spaces instead of tabs

" ---------------------
" Plugins
" ---------------------
Plug 'tpope/vim-surround'
Plug 'tpope/vim-commentary'
Plug 'machakann/vim-highlightedyank'
Plug 'justinmk/vim-sneak'
Plug 'vim-scripts/argtextobj.vim'
Plug 'kana/vim-textobj-entire'
Plug 'vim-scripts/ReplaceWithRegister'

" ---------------------
" Idea-specific Settings
" ---------------------
set ideajoin
set ideastatusicon=gray
set idearefactormode=keep

" ---------------------
" Motion / Navigation
" ---------------------
" Move to beginning/end of line
nmap H ^
nmap L $
vmap H ^
vmap L $

" Move selected text up/down (visual mode)
vmap J :m '>+1<CR>gv=gv
vmap K :m '<-2<CR>gv=gv

" ---------------------
" Replace Selection Without Yanking
" ---------------------
vnoremap <leader>p "_dP

" ---------------------
" Yank to System Clipboard
" ---------------------
nnoremap <leader>y "+y
vnoremap <leader>y "+y
nnoremap <leader>Y "+Y

" ---------------------
" Search Highlight & Redraw
" ---------------------
nnoremap <C-L> :nohlsearch<CR><C-L>
nnoremap n nzzzv
nnoremap N Nzzzv

" ---------------------
" Action Markers / Errors
" ---------------------
nmap ]d <Action>(GotoNextError)
nmap [d <Action>(GotoPreviousError)

" ---------------------
" Quick Open / Navigation (Telescope-like)
" ---------------------
nmap <leader>fr <Action>(RecentFiles)
nmap <leader>ff <Action>(GotoFile)
nmap <leader>sg <Action>(FindInPath)
nmap <leader>sd <Action>(ShowErrorDescription)
nmap <leader>e <Action>(ShowProblems)
nmap <leader>/ <Action>(Find)
nmap g/ <Action>(FindInPath)

" ---------------------
" LSP / Language Features
" ---------------------
nmap gd <Action>(GotoDeclaration)
nmap gr <Action>(ShowUsages)
nmap gI <Action>(GotoImplementation)
nmap gy <Action>(GotoTypeDeclaration)
nmap gD <Action>(GotoDeclaration)
nmap gs <Action>(FileStructurePopup)
nmap gS <Action>(GotoSymbol)
nmap cd <Action>(RenameElement)
nmap g. <Action>(ShowIntentionActions)
nmap <leader>fd <Action>(ReformatCode)
vmap <leader>fd <Action>(ReformatCode)
nmap K <Action>(QuickJavaDoc)

" ---------------------
" Multi-Cursor / Selection
" ---------------------
nmap gl <Action>(SelectNextOccurrence)
vmap gl <Action>(SelectNextOccurrence)
vmap gL <Action>(UnselectPreviousOccurrence)

" ---------------------
" Smart / Structural Selection
" ---------------------
vmap [x <Action>(EditorSelectWord)
xmap [x <Action>(EditorSelectWord)
xmap ]x <Action>(EditorUnSelectWord)
nmap ]f <Action>(MethodDown)
nmap [f <Action>(MethodUp)
