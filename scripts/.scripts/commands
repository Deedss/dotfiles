#!/bin/bash
###############################################################################
##### SYSTEM UPDATE                                                     #######
###############################################################################
update() {
    echo '-------------------------'
    echo '-------- UPDATE ---------'
    echo '-------------------------'
    sudo dnf update --refresh
    echo ''

    echo '-------------------------'
    echo '-------- FLATPAK --------'
    echo '-------------------------'
    flatpak update -y
    echo ''

    # Rust Update
    echo '-------------------------'
    echo '---------- RUST ---------'
    echo '-------------------------'
    rustup update
    echo ''
}

###############################################################################
####### BACKUP                                                           ######
###############################################################################
tar-pack() {
    local filename=$(basename "$1")
    tar --zstd -cvf "${filename}.tar.zst" "$1"
}

tar-unpack() {
    tar --zstd -xvf "$1"
}

backup-files() {
    cd ~ || exit

    # List of directories and files to back up
    local items=(
        ".var/app/com.brave.Browser/config/BraveSoftware/"
        ".dotfiles"
        "Private"
        "Work"
        "Projects"
        ".ssh"
        ".gitconfig"
    )

    for item in "${items[@]}"; do
        if [[ -e "$item" ]]; then
            tar-pack "$item"
        else
            echo "Skipping $item: does not exist."
        fi
    done
}
